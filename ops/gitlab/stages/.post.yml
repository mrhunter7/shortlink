# Load artifacts from multi-pipeline
# TODO: Watch https://gitlab.com/gitlab-org/gitlab/issues/202093#note_291607385
load artifacts golang:
  stage: .post
  script:
    - echo "Load artifacts from multi-pipeline"
  needs:
    - job: GOLANG
    - project: $CI_PROJECT_PATH
      ref: $CI_COMMIT_REF_NAME
      job: golint
      artifacts: true
    - project: $CI_PROJECT_PATH
      ref: $CI_COMMIT_REF_NAME
      job: gotest
      artifacts: true
#    - pipeline: $CI_UPSTREAM_PIPELINE_ID
#      job: SAST
#      artifacts: true
  rules:
    - if: $CI_COMMIT_TAG
      when: on_success

load artifacts sast:
  stage: .post
  script:
    - echo "Load artifacts from multi-pipeline"
  needs:
    - job: DEPENDENCY
    - project: $CI_PROJECT_PATH
      ref: $CI_COMMIT_REF_NAME
      job: code_quality
      artifacts: true
  rules:
    - if: $CI_COMMIT_TAG
      when: on_success
