version: v1beta1

name: buf.build/shortlink-org/shortlink

deps:
  - buf.build/googleapis/googleapis
  - buf.build/envoyproxy/protoc-gen-validate
  - buf.build/grpc-ecosystem/grpc-gateway
  - buf.build/srikrsna/protoc-gen-gotag

build:
  roots:
    - internal/boundaries/api/api-gateway/gateways/grpc-web/infrastructure
    - internal/boundaries/link/proxy/src/proto
    - internal/boundaries/payment/billing
    - internal/boundaries/link/link
    - internal/boundaries/link/metadata
    - internal/boundaries/marketing/referral/src
    - internal/boundaries/notification/newsletter/src
    - internal/pkg/eventsourcing
    - internal/pkg/raft

lint:
  use:
    - DEFAULT # the current strictest possible
    - COMMENTS
  rpc_allow_google_protobuf_empty_requests: true
  rpc_allow_google_protobuf_empty_responses: true

breaking:
  use:
    - WIRE_JSON

